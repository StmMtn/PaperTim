# ganz oben:
name: papertim   # <-- fester Compose-Projektname

networks:
  gamenet:
    name: gamenet

services:
  redis:
    image: redis:7
    networks: [gamenet]
    ports: ["6379:6379"]

  masterserver:
    build: ./masterserver
    networks: [gamenet]
    environment:
      - DOCKER_NETWORK=gamenet
      - COMPOSE_PROJECT_NAME=papertim   # <-- wichtig fÃ¼r Labels
    ports: ["3000:3000"]
    depends_on: [redis]
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  frontendlobby:
    build: { context: ./Frontend }
    networks: [gamenet]
    ports: ["8081:8081"]
    depends_on: [masterserver]

  # optional: statischer Dev-Gameserver
  gameserver:
    build: ./gameserver
    image: gameserver:latest
    networks: [gamenet]
    container_name: gameserver
    ports: ["8443:8443"]
    depends_on: [redis]
